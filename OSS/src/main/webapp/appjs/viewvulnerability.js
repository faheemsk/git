/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

$(document).ready(function() {

   // $("#viewVulnerabilityDetails").hide();
    $("#vulaccordion").accordion({
        collapsible: true
    });
    
    $('.fixme').fixheadertable({
        //colratio: [30, 115, ,180 , 160, 140, 140, 120, 80],
        colratio:[30,,,,,,,,,,],
        zebra: false,
        height: 250,
        whiteSpace: 'normal'
    });

    $('.fixme2').fixheadertable({
        colratio: [100, ],
        zebra: false,
        height: 200,
        whiteSpace: 'normal'
    });

    $('.fixme3').fixheadertable({
        zebra: true,
        whiteSpace: 'normal'
    });

    $('.fixme4').fixheadertable({
        colratio: [50, 100, , 150, 120],
        zebra: true,
        height: 200,
        whiteSpace: 'normal'
    });

//    $("#showViewVulnerbilityDetails").click(function() {
//        
//         document.vulnerabilitydetails.action = "viewvulnerabilitydetails.htm?engkey=3";
//         document.vulnerabilitydetails.submit();
//    })

    $(".multiselect").multipleSelect({
        filter: false,
        multiple: true,
        multipleWidth: 160,
        placeholder: "Select"
    });
    
    //Start: For export excel
    $("#exportToExcelForView").click(function() {
        var flag = false;
        var checkboxes = new Array();
        $('.checkboxGroup').each(function() {
            if (this.checked) {
                var id = $(this).attr('id');
                checkboxes.push(id);
                flag = true;
                $("#errorCheckboxValidationForView").html("");
            }
        });
        if (!flag) {
            $("#errorCheckboxValidationForView").html("<font class='ux-msg-error-under' style='margin-top: -16px;' color='red'>Please select at least one Vulnerability</font>");
            return false;
        } else {
            document.viewVulnerabilityForm.action = "vulnerabilityexporttoexcel.htm";
            document.viewVulnerabilityForm.submit();
        }
    });
    //End: For export excel
    
    //Start: For Review Complete
    $("#reviewComplete").click(function() {
        document.viewVulnerabilityForm.action = "updateservicestatus.htm";
            document.viewVulnerabilityForm.submit();
    });
    //Start: For Review Complete
   
});

function viewVulnerabilityDetails(vk) {
    var instanceIdentifier = $("#instanceIdentifier" + vk).val();
    $("#encInstanceIdentifier").val(instanceIdentifier);
    document.viewVulnerabilityForm.action = "viewvulnerabilitydetails.htm";
    document.viewVulnerabilityForm.submit();
}

function checkAll(headCheckbox) {
    var checkboxes = document.getElementsByClassName('checkboxGroup');
    if (headCheckbox.checked) {
        for (var i = 0; i < checkboxes.length; i++) {
            if (checkboxes[i].type === 'checkbox') {
                checkboxes[i].checked = true;
            }
        }
    } else {
        for (var i = 0; i < checkboxes.length; i++) {
            if (checkboxes[i].type === 'checkbox') {
                checkboxes[i].checked = false;
            }
        }
    }
}

function singleCheckbox(rowCheckbox) {
    var checkboxResult = [];
    var selectedCheckboxes = [];
    var headCheckbox = document.getElementById('headCheckbox');
    $('.checkboxGroup').each(function() {
        if (this.checked) {
            var id = $(this).attr('id');
            selectedCheckboxes.push(id);
        }
    });
    $('.checkboxGroup').each(function() {
        var id = $(this).attr('id');
        checkboxResult.push(id);
    });

    if (headCheckbox.checked && !rowCheckbox.checked) {
        headCheckbox.checked = false;
    }
    else if (selectedCheckboxes.length === checkboxResult.length && !headCheckbox.checked) {
        headCheckbox.checked = true;
    }
}

function toRoadmap() {
    document.toRoadmapPage.action = "roadmapsummary.htm";
    document.toRoadmapPage.submit();
}

